<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Memory Game - De Club van Sinterklaas</title>
<style>
  *, *::before, *::after { box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #fdf6e3;
    margin: 0; padding: 20px;
    display:flex; flex-direction:column; align-items:center;
  }
  h1 { color:#c0392b; margin-bottom:10px; }

  /* selects */
  select {
    font-size:16px; padding:8px 12px; margin:10px;
    border-radius:12px; border:2px solid #c0392b;
    background:#fff; color:#333; cursor:pointer;
    transition: all .18s ease;
  }
  select:hover { background:#fbeaea; border-color:#a93226; }

  #gameBoard {
    display:grid; gap:16px; width:95vw; max-width:1400px; margin:0 auto;
    position:relative;
  }

  .card {
    aspect-ratio:2/3;
    width:100%;
    perspective:1000px;
    cursor:pointer;
    /* beginstaat: klein en onzichtbaar */
    opacity: 0;
    transform: scale(0.28) translateY(10px);
    transform-origin: center center;
    transition: transform 520ms cubic-bezier(.2,.9,.2,1), opacity 420ms ease;
  }

  /* eindstaat: zichtbaar en op normale grootte */
  .card.show {
    opacity: 1;
    transform: scale(1) translateY(0);
  }

  .card-inner {
    position:relative; width:100%; height:100%;
    text-align:center; transition: transform 0.6s; transform-style: preserve-3d;
  }
  .card.flipped .card-inner { transform: rotateY(180deg); cursor:default; }

  .card-front, .card-back {
    position:absolute; width:100%; height:100%;
    border-radius:12px; backface-visibility:hidden;
    box-shadow:0 3px 6px rgba(0,0,0,.3);
    display:flex; justify-content:center; align-items:center; overflow:hidden;
  }

  .card-front {
    background:white; transform: rotateY(180deg);
    padding:6px; font-size:20px; font-weight:bold; color:#333;
  }
  .card-front img { width:100%; height:100%; object-fit:contain; display:block; user-select:none; pointer-events:none; }

  .card-back {
    background-color:#c0392b;
    background-image: url('logo.png');
    background-size: contain; background-repeat: no-repeat; background-position:center;
  }

  #stats { margin-top:20px; font-size:18px; color:#555; }
  #resetBtn {
    margin-top:15px; padding:10px 20px; background:#27ae60; border:none; border-radius:12px;
    color:white; font-size:18px; cursor:pointer; transition: background .18s ease, transform .12s;
  }
  #resetBtn:hover { background:#219150; transform:translateY(-2px); }
  #message { margin-top:15px; font-size:22px; color:#2980b9; }

  /* kleine responsive aanpassing */
  @media (max-width:600px) {
    #gameBoard { gap:10px; }
    select { width:100%; max-width:320px; }
    #resetBtn { width:100%; max-width:320px; }
  }
</style>
</head>
<body>

<h1>Memory Game - De Club van Sinterklaas</h1>

<label for="levelSelect">Kies level:</label>
<select id="levelSelect">
  <option value="4">Makkelijk (4 paren)</option>
  <option value="8" selected>Gemiddeld (8 paren)</option>
  <option value="12">Moeilijk (12 paren)</option>
</select>

<label for="modeSelect">Kies speltype:</label>
<select id="modeSelect">
  <option value="images" selected>Alleen plaatjes</option>
  <option value="imageText">Plaatjes + tekst</option>
</select>

<div id="gameBoard"></div>

<div id="stats">
  Beurten: <span id="turns">0</span> | Gepaarde paren: <span id="matches">0</span> / <span id="totalPairs">8</span>
</div>
<button id="resetBtn">Nieuw Spel</button>

<div id="message"></div>

<script>
  const allImages = [
    'Danspiet.png','COOLE-Piet-nieuw-534x1024.png','cadeau.png','logo.png',
    'Kado-pieten-637x1024.png','Sinterklaasfilm2023-Fernando-4-683x1024.png',
    'Testpiet-e1719663796108.png','De-Club-van-Sinterklaas-Muziekpiet.png',
    'Sinterklaasfilm2023-Sinterklaas-62.png','Sinterklaasfilm2021-Super-Piet-16-1.png',
    'De-Club-van-Sinterklaas-Bakpiet-2.png','De-Club-van-Sinterklaas-Profpiet.png'
  ];

  const imageNames = {
    "Danspiet.png":"Danspiet","COOLE-Piet-nieuw-534x1024.png":"Coole Piet","cadeau.png":"Cadeau",
    "logo.png":"Logo","Kado-pieten-637x1024.png":"Kado Pieten","Sinterklaasfilm2023-Fernando-4-683x1024.png":"Fernando",
    "Testpiet-e1719663796108.png":"Testpiet","De-Club-van-Sinterklaas-Muziekpiet.png":"Muziekpiet",
    "Sinterklaasfilm2023-Sinterklaas-62.png":"Sinterklaas","Sinterklaasfilm2021-Super-Piet-16-1.png":"Super Piet",
    "De-Club-van-Sinterklaas-Bakpiet-2.png":"Bakpiet","De-Club-van-Sinterklaas-Profpiet.png":"Profpiet"
  };

  let cards = [], flippedCards = [], matchedCards = 0, turns = 0, lockBoard = false, totalPairs = 8;

  const gameBoard = document.getElementById('gameBoard');
  const turnsDisplay = document.getElementById('turns');
  const matchesDisplay = document.getElementById('matches');
  const message = document.getElementById('message');
  const resetBtn = document.getElementById('resetBtn');
  const levelSelect = document.getElementById('levelSelect');
  const modeSelect = document.getElementById('modeSelect');
  const totalPairsDisplay = document.getElementById('totalPairs');

  function shuffle(array){ for(let i=array.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [array[i],array[j]]=[array[j],array[i]]; } return array; }
  function getRandomImages(numPairs){ return shuffle([...allImages]).slice(0,numPairs); }

  function createBoard(){
    totalPairs = parseInt(levelSelect.value,10);
    const mode = modeSelect.value;
    const selectedImages = getRandomImages(totalPairs);
    cards = [];

    if(mode === "images"){
      selectedImages.forEach(img => { cards.push({type:"image", value:img, pairId:img}); cards.push({type:"image", value:img, pairId:img}); });
    } else {
      selectedImages.forEach(img => {
        const name = imageNames[img] || img.split('.')[0];
        cards.push({type:"image", value:img, pairId:img});
        cards.push({type:"text", value:name, pairId:img});
      });
    }

    cards = shuffle(cards);
    matchedCards = 0; turns = 0;
    turnsDisplay.textContent = turns; matchesDisplay.textContent = matchedCards; message.textContent = ''; totalPairsDisplay.textContent = totalPairs;
    flippedCards = []; lockBoard = false;

    if(totalPairs === 4) gameBoard.style.gridTemplateColumns = 'repeat(4, 1fr)';
    else gameBoard.style.gridTemplateColumns = 'repeat(8, 1fr)';

    gameBoard.innerHTML = '';

    cards.forEach((cardObj, index) => {
      const card = document.createElement('div');
      card.className = 'card';
      card.dataset.type = cardObj.type;
      card.dataset.value = cardObj.value;
      card.dataset.pairId = cardObj.pairId;

      let frontContent = cardObj.type === "image" ? `<img src="${cardObj.value}" alt="kaartje" draggable="false">` : cardObj.value;
      card.innerHTML = `<div class="card-inner"><div class="card-front">${frontContent}</div><div class="card-back"></div></div>`;

      card.addEventListener('click', onCardClick);
      gameBoard.appendChild(card);
    });

    // start the deal animation (cards appear from a pile)
    requestAnimationFrame(() => animateDeal());
  }

  function animateDeal(){
    const list = Array.from(document.querySelectorAll('#gameBoard .card'));
    // ensure no leftover classes
    list.forEach(c => c.classList.remove('show'));
    // force reflow so transitions start correctly
    void gameBoard.offsetWidth;
    // staggered show
    list.forEach((card, i) => {
      setTimeout(() => {
        card.classList.add('show');
      }, 100 + i * 70);
    });
  }

  function onCardClick(e){
    if(lockBoard) return;
    const card = e.currentTarget;
    if(flippedCards.includes(card) || card.classList.contains('flipped')) return;
    card.classList.add('flipped'); flippedCards.push(card);
    if(flippedCards.length === 2){ turns++; turnsDisplay.textContent = turns; checkForMatch(); }
  }

  function checkForMatch(){
    const [c1,c2] = flippedCards;
    if(c1.dataset.pairId === c2.dataset.pairId){
      matchedCards++; matchesDisplay.textContent = matchedCards;
      c1.classList.add('matched'); c2.classList.add('matched');
      flippedCards = [];
      if(matchedCards === totalPairs) message.textContent = 'Gefeliciteerd! Je hebt alle paren gevonden! ðŸŽ‰';
    } else {
      lockBoard = true;
      setTimeout(()=>{ c1.classList.remove('flipped'); c2.classList.remove('flipped'); flippedCards = []; lockBoard = false; }, 1000);
    }
  }

  // NEW: optional "new game" with gather+deal could be added; for now createBoard triggers the deal animation
  resetBtn.addEventListener('click', createBoard);
  levelSelect.addEventListener('change', createBoard);
  modeSelect.addEventListener('change', createBoard);

  // initial build
  createBoard();
</script>

</body>
</html>
